function MarketDateColumn(b,a){this.parent=b;this.style=a||{};this.className=this.style.className||"DateColumn";this.noDate=this.style.noDate||"-";b.appendChild(this)}MarketDateColumn.prototype.setValue=function(b,h,d){var f=this.noDate;if(b&&this.style.attribute){var e=parseInt(b[this.style.attribute]);var g=new Date(e);if(null!=this.style.serverOffset){g=DateViewer.getServerTime(g,this.style.serverOffset)}g=DateFormat.format(g,JSV.getLang("DateFormat","fullType3"));var c=DateFormat.format(new Date(b.startTime),JSV.getLang("DateFormat","fullType3"));var a=DateFormat.format(new Date(b.endTime),JSV.getLang("DateFormat","fullType3"));f=(e)?g+"~"+a:f}$("<div>").addClass(this.className).css({"text-align":this.style.align||"center"}).text(f).appendTo(h)};function MarketDateTermEditor(b,a){this.style=a||{};this.className=this.style.className||"MarketDateTermEditor";this.widget=$("<div>").addClass(this.className).appendTo(b);this.mode=this.style.mode||"write";this.init()}MarketDateTermEditor.prototype.init=function(){var h=this;if(this.mode=="edit"){var g=$('<div>				<div class="dateView" id="dateStartDiv"></div>				<span class="bar">-</span>				<div class="date" id="dateEndDiv"></div>				<div class="select_box" id="selectEndDiv">				</div>		</div>').addClass("set_time").appendTo(this.widget);var e=$("#selectStartDiv");var d=$("#selectEndDiv");this.startDate=new DateViewer($("#dateStartDiv"),{format:JSV.getLang("MarketDateTermEditor","dateFormat")});this.startDate.setValue(new Date().getTime());this.endDate=new DateFieldEditor($("#dateEndDiv"),this.style);this.endTime=new DropDownGroupFieldEditor(d);this.setTimeOption()}else{var g=$('<div>				<div class="date" id="dateStartDiv"></div>				<div class="select_box" id="selectStartDiv">				</div>				<span class="bar">-</span>				<div class="date" id="dateEndDiv"></div>				<div class="select_box" id="selectEndDiv">				</div>		</div>').addClass("set_time").appendTo(this.widget);var e=$("#selectStartDiv");var d=$("#selectEndDiv");this.startDate=new DateFieldEditor($("#dateStartDiv"),this.style);this.startDate.setValue(new Date().getTime());var f=new Date(Date.parse(new Date())+(1000*60*30));this.startTime=new DropDownGroupFieldEditor(e);this.startTime.setValue(this.addZeroStr(f.getHours())+":"+this.addZeroStr(this.resetMinute(f.getMinutes())));this.endDate=new DateFieldEditor($("#dateEndDiv"),this.style);var c=new Date();var b=this.style.basicPeriod;var a=c.setDate(c.getDate()+parseInt(b));this.endDate.setValue(a);this.endTime=new DropDownGroupFieldEditor(d);this.endTime.setValue(this.addZeroStr(f.getHours())+":"+this.addZeroStr(this.resetMinute(f.getMinutes())));this.setTimeOption()}};MarketDateTermEditor.prototype.setTimeOption=function(){for(var a=0;a<24;a++){if(this.mode=="write"){this.startTime.add(this.addZeroStr(a)+":00",this.addZeroStr(a)+":00");this.startTime.add(this.addZeroStr(a)+":30",this.addZeroStr(a)+":30")}this.endTime.add(this.addZeroStr(a)+":00",this.addZeroStr(a)+":00");this.endTime.add(this.addZeroStr(a)+":30",this.addZeroStr(a)+":30")}};MarketDateTermEditor.prototype.setValue=function(b){var d=new Date(b.startTime)||new Date();var a=new Date(b.endTime)||new Date();if(this.mode=="write"){if(typeof JSV.getParameter("id")=="undefined"||JSV.getParameter("id")<1){var c=new Date(Date.parse(new Date())+(1000*60*30));this.startDate.setValue(c.getTime());this.startTime.setValue(this.addZeroStr(c.getHours())+":"+this.addZeroStr(this.resetMinute(c.getMinutes())))}else{this.startDate.setValue(b.startTime);this.startTime.setValue(this.addZeroStr(d.getHours())+":"+this.addZeroStr(d.getMinutes()))}}this.endDate.setValue(b.endTime);this.endTime.setValue(this.addZeroStr(a.getHours())+":"+this.addZeroStr(a.getMinutes()))};MarketDateTermEditor.prototype.resetMinute=function(a){if(a==0){return 0}else{if((a>0)&&(a<30)){return 0}else{return 30}}};MarketDateTermEditor.prototype.getValue=function(){var a=[];a.push(this.getStartDate());a.push(this.getEndDate());return a};MarketDateTermEditor.prototype.getStartDate=function(){var a=new Date(this.startDate.getValue());if(this.mode=="write"){var f=null;var d=a;var c=new Date();var b=c.getHours();var e=c.getMinutes();if(e<30){e=30}else{e=0;b=b+1}if(this.startTime.getValue()!=null){f=this.startTime.getValue().split(":")}else{var f=b+":"+e;f=f.split(":")}a=new Date(d.getFullYear(),d.getMonth(),d.getDate(),f[0],f[1])}a=a.getTime();return a};MarketDateTermEditor.prototype.getEndDate=function(){var c=new Date(this.endDate.getValue());var f=null;var c=new Date(this.endDate.getValue());var b=new Date();var a=b.getHours();var d=b.getMinutes();if(d<30){d=30}else{d=0;a=a+1}if(this.endTime.getValue()!=null){f=this.endTime.getValue().split(":")}else{var f=a+":"+d;f=f.split(":")}var e=new Date(c.getFullYear(),c.getMonth(),c.getDate(),f[0],f[1]).getTime();return e};MarketDateTermEditor.prototype.validate=function(b){var a=new Date();if(this.getStartDate()<a){if(this.mode=="write"){return b.message3}}else{if(this.getStartDate()>=this.getEndDate()){return b.message1}else{if(a>this.getEndDate()){return b.message2}}}return null};MarketDateTermEditor.prototype.addZeroStr=function(a){return MarketDateTermEditor.addZeroStr(a)};MarketDateTermEditor.addZeroStr=function(b){var a=parseInt(b);return(a<10)?"0"+a:""+a};function MarketDropDownGroupFieldEditor(b,a){DropDownGroupFieldEditor.call(this,b,$.extend(a,{}))}MarketDropDownGroupFieldEditor.prototype=$.extend({},DropDownGroupFieldEditor.prototype,{refresh:function(d){this.widget.empty();this.init();if(d){var a=d.split(",");var c=[];for(var b=0;b<a.length;b++){c=a[b].split(":");this.add(c[1],c[0])}}}});DropDownGroupFieldEditor.prototype.setValue=function(b){if(b!=null){var a=this.ul.children().removeClass("selected").find('a[value="'+b+'"]');this.txtSpan.html(a.find("span.txt").text());a.parent().addClass("selected")}};function MarketDateTermViewer(b,a){this.style=a||{};this.className=this.style.className||"DateTermViewer";this.widget=$("<div>").addClass(this.className).appendTo(b);this.format=this.style.format?this.style.format:null}MarketDateTermViewer.prototype.setFormat=function(a){this.format=a};MarketDateTermViewer.prototype.setValue=function(a){if(a==null||a.length==0){return}if(a[0]!=null&&a[1]!=null){this.startDate=a[0];this.endDate=a[1];if(typeof(this.startDate)!="number"){this.startDate=parseInt(this.startDate)}if(typeof(this.endDate)!="number"){this.endDate=parseInt(this.endDate)}str=DateFormat.format(new Date(this.startDate),this.format)+" ~ "+DateFormat.format(new Date(this.endDate),this.format);this.widget.text(str)}else{if(a[0]==null&&a[1]!=null){this.startDate="";this.endDate=a[1];if(typeof(this.endDate)!="number"){this.endDate=parseInt(this.endDate)}str=this.startDate+" ~ "+DateFormat.format(new Date(this.endDate),this.format);this.widget.text(str)}else{if(a[0]!=null&&a[1]==null){this.startDate=a[0];this.endDate="";if(typeof(this.startDate)!="number"){this.startDate=parseInt(this.startDate)}str=DateFormat.format(new Date(this.startDate),this.format)+" ~ "+this.endDate;this.widget.text(str)}else{this.widget.text("-")}}}};MarketDateTermViewer.prototype.getValue=function(){var a=new Array();a[0]=this.startDate;a[1]=this.endDate;return a};ItemViewer.hideTD=function(b){while(b){b=b.parentNode;if(b.nodeName=="TD"){var a=$(b);a.attr("hide","true");a.css("visibility","hidden").hide();var c=b.parentNode.parentNode;ItemViewer.setValueAfterInit(c);break}}};ItemViewer.showTD=function(b){while(b){b=b.parentNode;if(b.nodeName=="TD"){var a=$(b);a.removeAttr("hide");a.show().css("visibility","visible");if(JSV.browser.msie6){ItemViewer.subShow(a)}var c=b.parentNode.parentNode;ItemViewer.setValueAfterInit(c);break}}};function MarketNumberColumn(parent,style){TextColumn.call(this,parent,$.extend(style,{}));this.isCommas=this.style.isCommas?eval(this.style.isCommas):false}MarketNumberColumn.prototype=$.extend({},TextColumn.prototype,{setValue:function(a,d,b){$(d).attr("align",this.align);var c=$("<div>").addClass(this.className).appendTo(d);if(this.padding){c.css("padding",this.padding)}if(this.style.noticeImg&&a.announced==1){c.html('<img class="TextColumnImg" src="'+JSV.getLocaleImagePath(this.style.noticeImg)+'"/>')}else{if(this.labelProvider==null){this.setLabelProvider(new TextColumnLabelProvider())}this.textValue=(a&&this.style.attribute)?this.labelProvider.getText(a,this.style.attribute):"";this.textValue=(this.style.defaultValue==this.textValue&&this.style.defaultDisplay)?this.style.defaultDisplay:this.textValue;this.textValue=this.style.pre?this.style.pre+this.textValue:this.textValue;this.textValue=this.style.post?this.textValue+this.style.post:this.textValue;if($.isNumeric(this.textValue)&&this.isCommas){this.textValue=JSV.getLang("DataFormat","moneyType2")+this.textValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}$("<nobr>").addClass("nobr").appendTo(c).attr("title",this.textValue||"").text(this.style.isMenu?"[ "+this.textValue+" ]":this.textValue)}}});function MarketNumberFieldEditor(b,a){var c=this;this.style=a||{};this.prefix=this.style.prefix||"";this.className=this.style.className||"TextFieldEditor";this.widget=$('<input type="text">').val(JSV.getLang("DataFormat","moneyType2")+"0").addClass(this.className).appendTo(b).bind("keyup",this,function(d){$(this).val(c.inputNumberFormat($(this).val().replace(/[^0-9]/gi,"")));if(d.data.onkeyup){d.data.onkeyup(d)}if(d.keyCode==13){return false}}).bind("focus",this,function(d){$(this).addClass(d.data.className+"_focus");d.data.onfocus(d)}).bind("blur",this,function(d){$(this).removeClass(d.data.className+"_focus");d.data.onfocusout(d)}).bind("click",this,function(d){if(d.data.onclick){d.data.onclick(d)}});if(this.style.readOnly=="true"){this.widget.prop("readOnly",true).addClass(this.className+"_readOnly")}else{this.widget.removeProp("readOnly").removeClass(this.className+"_readOnly")}this.onEvent=true;if(this.style.width){this.widget.width(this.style.width)}if(this.style.value){this.widget.val(this.prefix+this.style.value)}if(this.style.maxLength){this.widget.attr("maxLength",this.style.maxLength)}if(this.style.imeMode){this.widget.css("imeMode",this.style.imeMode)}if(this.style.autoComplete){JSV.register(new AutoComplete(this.widget.get(0),this),this,"autoComplete")}if(this.style.numText){$("<span></span>").addClass(this.className+"_numText").text(this.style.numText).appendTo(b)}}MarketNumberFieldEditor.prototype.setValue=function(a){if(a!=null&&a!=""){a=this.inputNumberFormat(a);this.setOriginal(this.prefix+a)}else{if(this.style.example){this.setExam()}else{this.widget.val("")}}JSV.notify(a,this)};MarketNumberFieldEditor.prototype.inputNumberFormat=function(a){a=JSV.getLang("DataFormat","moneyType2")+this.comma(this.uncomma(a));return a};MarketNumberFieldEditor.prototype.comma=function(a){a=String(a);return a.replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")};MarketNumberFieldEditor.prototype.uncomma=function(a){a=String(a);return a.replace(/[^\d]+/g,"")};MarketNumberFieldEditor.prototype.getValue=function(){if(this.style.example&&this.onEvent){return""}var a=$.trim(this.uncomma(this.widget.val()));return parseInt(a||0)};MarketNumberFieldEditor.prototype.focus=function(){this.widget.focus()};MarketNumberFieldEditor.prototype.onfocus=function(){if(this.preFocus){this.preFocus()}if(this.style.example&&this.onEvent){this.setOriginal("")}};MarketNumberFieldEditor.prototype.onfocusout=function(){if(this.preFocusout){this.preFocusout()}if(this.style.example&&this.getValue()==""){this.setExam()}};MarketNumberFieldEditor.prototype.setMaxlength=function(a){this.widget.attr("maxLength",a)};MarketNumberFieldEditor.prototype.setReadOnly=function(a){if(a){this.widget.prop("readOnly",true).addClass(this.className+"_readOnly")}else{this.widget.removeProp("readOnly").removeClass(this.className+"_readOnly")}};MarketNumberFieldEditor.prototype.setEditable=function(a){this.widget.attr("disabled",!a)};MarketNumberFieldEditor.prototype.setExam=function(){this.widget.val(this.style.example).removeClass(this.className+"_original").addClass(this.className+"_exam");this.onEvent=true};MarketNumberFieldEditor.prototype.setOriginal=function(a){this.widget.val(a).removeClass(this.className+"_exam").addClass(this.className+"_original");this.onEvent=false};MarketNumberFieldEditor.prototype.autoComplete=function(a,b){this.setValue(a)};MarketNumberFieldEditor.prototype.clear=function(){this.widget.remove()};MarketNumberFieldEditor.prototype.setVisbie=function(){this.widget.parent().parent().remove()};function MarketNumberRatio(b,a){var c=this;this.style=a||{};this.prefix=this.style.prefix||"";this.className=this.style.className||"TextFieldEditor";this.widget=$('<input type="text">').addClass(this.className).appendTo(b).bind("keyup",this,function(d){$(this).val(c.inputNumberFormat($(this).val()));if(d.data.onkeyup){d.data.onkeyup(d)}if(d.keyCode==13){return false}}).bind("focus",this,function(d){$(this).addClass(d.data.className+"_focus");d.data.onfocus(d)}).bind("blur",this,function(d){$(this).removeClass(d.data.className+"_focus");d.data.onfocusout(d)}).bind("click",this,function(d){if(d.data.onclick){d.data.onclick(d)}});if(this.style.readOnly=="true"){this.widget.prop("readOnly",true).addClass(this.className+"_readOnly")}else{this.widget.removeProp("readOnly").removeClass(this.className+"_readOnly")}this.onEvent=true;if(this.style.width){this.widget.width(this.style.width)}if(this.style.value){this.widget.val(this.prefix+this.style.value)}if(this.style.maxLength){this.widget.attr("maxLength",this.style.maxLength)}if(this.style.imeMode){this.widget.css("imeMode",this.style.imeMode)}if(this.style.autoComplete){JSV.register(new AutoComplete(this.widget.get(0),this),this,"autoComplete")}if(this.style.numText){$("<span></span>").addClass(this.className+"_numText").text(this.style.numText).appendTo(b)}}MarketNumberRatio.prototype.setValue=function(a){if(a!=null&&a!=""){a=JSV.getLang("DataFormat","moneyType3")+this.inputNumberFormat(a);this.setOriginal(this.prefix+a)}else{if(this.style.example){this.setExam()}else{this.widget.val("")}}JSV.notify(a,this)};MarketNumberRatio.prototype.inputNumberFormat=function(a){a=JSV.getLang("DataFormat","moneyType3")+this.limit(this.uncomma(a));return a};MarketNumberRatio.prototype.comma=function(a){a=String(a);return a.replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")};MarketNumberRatio.prototype.limit=function(a){a=String(a);return a.replace(/[^\d]?$|^100$/g,"")};MarketNumberRatio.prototype.uncomma=function(a){a=String(a);return a.replace(/[^\d]+/g,"")};MarketNumberRatio.prototype.getValue=function(){if(this.style.example&&this.onEvent){return""}var a=$.trim(this.uncomma(this.widget.val()));return parseInt(a||0)};MarketNumberRatio.prototype.focus=function(){this.widget.focus()};MarketNumberRatio.prototype.onfocus=function(){if(this.preFocus){this.preFocus()}if(this.style.example&&this.onEvent){this.setOriginal("")}};MarketNumberRatio.prototype.onfocusout=function(){if(this.preFocusout){this.preFocusout()}if(this.style.example&&this.getValue()==""){this.setExam()}};MarketNumberRatio.prototype.setMaxlength=function(a){this.widget.attr("maxLength",a)};MarketNumberRatio.prototype.setReadOnly=function(a){if(a){this.widget.prop("readOnly",true).addClass(this.className+"_readOnly")}else{this.widget.removeProp("readOnly").removeClass(this.className+"_readOnly")}};MarketNumberRatio.prototype.setEditable=function(a){this.widget.attr("disabled",!a)};MarketNumberRatio.prototype.setExam=function(){this.widget.val(this.style.example).removeClass(this.className+"_original").addClass(this.className+"_exam");this.onEvent=true};MarketNumberRatio.prototype.setOriginal=function(a){this.widget.val(a).removeClass(this.className+"_exam").addClass(this.className+"_original");this.onEvent=false};MarketNumberRatio.prototype.autoComplete=function(a,b){this.setValue(a)};MarketNumberRatio.prototype.clear=function(){this.widget.remove()};MarketNumberRatio.prototype.setVisbie=function(){this.widget.parent().parent().remove()};function MarketNumberViewer(c,b){var f=this;this.style=b||{};this.className=this.style.className||"MarketNumberViewer";this.seq=JSV.SEQUENCE++;var a='<span class="'+this.className+'" id="Err'+this.className+this.seq+'">		<span class="textSpan" id="TextViewTextSpan'+this.seq+'"></span>		<span class="valueSpan" id="TextViewValueSpan'+this.seq+'"></span>	</span>';try{this.widget=$(a).addClass(this.className).appendTo(c)}catch(d){$(c).append(a);this.widget=$(c).find("#Err"+this.className+this.seq)}}MarketNumberViewer.prototype.setValue=function(a){if(this.style.text){this.widget.find("#TextViewTextSpan"+this.seq).text(this.style.text)}if(a!=null&&new String(a).trim()){this.textValue=(this.style.defaultValue==a&&this.style.defaultDisplay)?this.style.defaultDisplay:JSV.getLocaleStr(a);this.widget.find("#TextViewValueSpan"+this.seq).text(JSV.getLang("DataFormat","moneyType2")+this.comma(a)+(this.style.suffix||""))}else{this.widget.find("#TextViewValueSpan"+this.seq).html("&nbsp;")}};MarketNumberViewer.prototype.inputNumberFormat=function(a){a=this.comma(this.uncomma(a));return a};MarketNumberViewer.prototype.comma=function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};MarketNumberViewer.prototype.setVisbie=function(){this.widget.parent().parent().remove()};MarketNumberViewer.prototype.getValue=function(){return this.textValue};